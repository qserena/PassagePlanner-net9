<UserControl
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:core="clr-namespace:System;assembly=mscorlib"
    xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
    xmlns:local="clr-namespace:PassagePlanner"
    xmlns:ignore="http://www.ignore.com"
    xmlns:sys="clr-namespace:System;assembly=mscorlib"
    mc:Ignorable="d ignore"
	x:Class="PassagePlanner.VesselUC"
	x:Name="UserControl"
	d:DesignWidth="898.783" d:DesignHeight="634.388"
    DataContext="{Binding VesselVM, Source={StaticResource Locator}}">

    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Colors.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Fonts.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Controls.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/Blue.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MahApps.Metro;component/Styles/Accents/BaseLight.xaml" />
                <ResourceDictionary Source="../Skins/Resources.xaml" />
            </ResourceDictionary.MergedDictionaries>
            
            <local:SystemDecimalConverter x:Key="decimalConverter" />
            <local:NumberOfDecimalsWhenNeededConverter x:Key="numberOfDecimalsWhenNeededConverter" />

            <!-- Custom styling TextBox only to be able to override Validation.ErrorTemplate -->
            <Style x:Key="TextBoxStyle" TargetType="{x:Type TextBox}" BasedOn="{StaticResource MetroTextBox}">
                <Setter Property="Validation.ErrorTemplate">
                    <Setter.Value>
                        <ControlTemplate>
                            <DockPanel LastChildFill="True">
                                <Popup IsOpen="True" PlacementTarget="{Binding ElementName=ErrorControl5}"   
									        Placement="Right"       
                                            HorizontalOffset="6"
									        PopupAnimation="Fade"    
									        AllowsTransparency="False">

                                    <Grid Background="#FFE02010" >
                                        <TextBlock Margin="4,4,4,2"
											        Text="{Binding AdornedElement.(Validation.Errors)[0].ErrorContent, ElementName=ErrorControl5}"
											        Height="18" Width="Auto" VerticalAlignment="Center" TextAlignment="Center"
											        Foreground="White" Background="#FFE02010"/>
                                    </Grid>
                                </Popup>
                                <Border BorderBrush="#FFE02010" BorderThickness="2" >
                                    <AdornedElementPlaceholder x:Name="ErrorControl5" Margin="-1.5"/>
                                </Border>
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="SelectionBrush" Value="#AA119EDA"/>
                <Style.Triggers>
                    <Trigger Property="Validation.HasError" Value="true">
                        <Setter Property="BorderThickness" Value="0"/>
                    </Trigger>
                </Style.Triggers>
            </Style>

        </ResourceDictionary>
                
    </UserControl.Resources>
    

        <Grid x:Name="LayoutRoot">
        <DockPanel LastChildFill="True">
            <Border Height="20" DockPanel.Dock="Top"/>
            <Grid DockPanel.Dock="Bottom">
                <Grid.RowDefinitions>
                    <RowDefinition Height="50"/>
                </Grid.RowDefinitions>
                <Button x:Name="buttonVesselDataSave" Content="Save" Width="60" Height="24" IsDefault="True" Command="{Binding SaveVesselDataCommand}" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="5,5,50,5"/>
            </Grid>

            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="5*"/>
                    <ColumnDefinition Width="1*"/>
                    <ColumnDefinition Width="4*"/>
                    <ColumnDefinition Width="1*"/>
                </Grid.ColumnDefinitions>
                <StackPanel Orientation="Vertical" Grid.Column="0">
                    <Grid Margin="0,5,0,0">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*"/>
                            <ColumnDefinition Width="5*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="28"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Vessel's name:" Margin="5" HorizontalAlignment="Right"/>
                        <TextBox x:Name="textBoxVesselName" Grid.Row="0" Grid.Column="1" Margin="5,2" Text="{Binding VesselName}" MinHeight="18" Style="{StaticResource TextBoxStyle}"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton"/>

                    </Grid>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="24"/>
                        </Grid.RowDefinitions>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="28"/>
                            <RowDefinition Height="28"/>
                        </Grid.RowDefinitions>
                       
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Vessel's beam (width) [m]:" Margin="5" HorizontalAlignment="Right" MinHeight="18"/>
                       
                        <TextBox Grid.Row="0" Grid.Column="1" Margin="5,2" MinHeight="18"
							        MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                            <Binding Path="VesselBeam" ValidatesOnDataErrors="True" Converter="{StaticResource numberOfDecimalsWhenNeededConverter}" 
                                         ConverterParameter="2" UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                <Binding.ValidationRules>
                                    <local:VesselBeamRule />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Min Under Keel Clearance (UKC) required [m]:" Margin="5" HorizontalAlignment="Right" MinHeight="18"/>
                        
                        <TextBox Grid.Row="1" Grid.Column="1" Margin="5,2" MinHeight="18"
							        MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                            <Binding Path="MinUkcRequired" ValidatesOnDataErrors="True" Converter="{StaticResource numberOfDecimalsWhenNeededConverter}" 
                                         ConverterParameter="2" UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                <Binding.ValidationRules>
                                    <local:MinUkcRule />
                                </Binding.ValidationRules>
                            </Binding>
                        </TextBox>
                    </Grid>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="24"/>
                        </Grid.RowDefinitions>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="9*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                            <RowDefinition Height="24"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Text="Navigational bridge watch conditions:" Margin="5,3,3,3" VerticalAlignment="Bottom"/>

                        <TextBox Grid.Row="1" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[0].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="2" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[1].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="3" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[2].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="4" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[3].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="5" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[4].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="6" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[5].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="7" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[6].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="8" Grid.Column="1" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[7].Abbreviation, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>

                        <TextBox Grid.Row="1" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[0].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="2" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[1].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="3" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[2].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="4" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[3].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="5" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[4].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="6" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[5].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="7" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[6].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                        <TextBox Grid.Row="8" Grid.Column="2" Margin="1" Text="{Binding NavigationalBridgeWatchConditions[7].DefinitionText, Mode=TwoWay}" MinHeight="18"
                                 MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}"/>
                    </Grid>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="32"/>
                        </Grid.RowDefinitions>
                    </Grid>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*"/>
                            <ColumnDefinition Width="4*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="30"/>

                        </Grid.RowDefinitions>

                    </Grid>
                </StackPanel>

                <DockPanel LastChildFill="True" Grid.Column="2">
                    <Grid DockPanel.Dock="Top">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="5"/>
                            </Grid.RowDefinitions>
                        </Grid>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="20"/>
                            </Grid.RowDefinitions>
                            <TextBlock Text="For Squat and UKC calculations:"/>
                        </Grid>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="5"/>
                            </Grid.RowDefinitions>
                        </Grid>
                    </Grid>

					
                    <Grid DockPanel.Dock="Bottom" Name="bottom">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto"/>
                            <RowDefinition Height="auto"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.Row="0" Text="The Block Coefficient Cb is obtained from hydrostatical tables. If not available, it may be calculated, using the formula:" Height="60" Margin="0,0,-0.87,0" TextWrapping="Wrap" Padding="0,20,0,0"/>
                        <Canvas Grid.Row="1" Height="60" Margin="0,0,0.13,0">
                            <TextBlock Text="Cb =" Height="21" TextWrapping="Wrap" FontSize="14" Canvas.Left="10" Canvas.Top="19" Width="32"/>
                            <TextBlock Text="Displacement volume at Mean Draught" Height="21" TextWrapping="Wrap" FontSize="14" Canvas.Left="47" Canvas.Top="10" Width="254" TextDecorations="Underline"/>
                            <TextBlock Text="Vessel Lpp x Beam x Draught midship" Height="21" TextWrapping="Wrap" FontSize="14" Canvas.Left="47" Canvas.Top="31" Width="242"/>
                        </Canvas>
                    </Grid>

                    <Grid Name="mid">
                        <Grid.ColumnDefinitions>

                            <ColumnDefinition Width="6*" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="28"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <Border Grid.Row="0" Grid.Column="0" BorderBrush="LightGray" BorderThickness="2" Margin="0,0,0,-2">
                            <Grid Grid.Row="0" Grid.Column="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="24"/>
                                </Grid.RowDefinitions>
                                <TextBlock Grid.Column="0" Text="Mean Draught [m]" VerticalAlignment="Center" HorizontalAlignment="Center" />
                                <TextBlock Grid.Column="1" Text="Block Coefficient, Cb" VerticalAlignment="Center" HorizontalAlignment="Center" />
                            </Grid>
                        </Border>

                        <Border Grid.Row="1" Grid.Column="0" BorderBrush="LightGray" BorderThickness="2">
                            <ScrollViewer Name="svScrollViewer" Height="auto" BorderThickness="2" BorderBrush="{DynamicResource {x:Static SystemColors.ControlDarkBrushKey}}" Margin="1,2,2,2">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                        <RowDefinition Height="23"/>
                                    </Grid.RowDefinitions>

                                    <TextBlock Grid.Row="0" Grid.Column="0" Text="02" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    
                                    <TextBox Grid.Row="0" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[2].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>
                                    
                                    <TextBlock Grid.Row="1" Grid.Column="0" Text="03" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="1" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[3].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="2" Grid.Column="0" Text="04" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="2" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[4].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="3" Grid.Column="0" Text="05" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="3" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[5].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="4" Grid.Column="0" Text="06" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="4" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[6].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="5" Grid.Column="0" Text="07" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="5" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[7].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="6" Grid.Column="0" Text="08" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="6" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[8].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="7" Grid.Column="0" Text="09" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="7" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[9].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="8" Grid.Column="0" Text="10" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="8" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[10].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="9" Grid.Column="0" Text="11" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="9" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[11].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="10" Grid.Column="0" Text="12" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="10" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[12].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="11" Grid.Column="0" Text="13" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="11" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[13].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="12" Grid.Column="0" Text="14" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="12" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[14].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="13" Grid.Column="0" Text="15" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="13" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[15].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="14" Grid.Column="0" Text="16" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="14" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[16].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="15" Grid.Column="0" Text="17" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="15" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[17].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="16" Grid.Column="0" Text="18" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="16" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[18].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="17" Grid.Column="0" Text="19" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="17" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[19].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="18" Grid.Column="0" Text="20" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="18" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[20].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="19" Grid.Column="0" Text="21" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="19" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[21].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="20" Grid.Column="0" Text="22" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="20" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[22].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="21" Grid.Column="0" Text="23" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="21" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[23].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="22" Grid.Column="0" Text="24" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="22" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[24].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="23" Grid.Column="0" Text="25" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="23" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[25].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="24" Grid.Column="0" Text="26" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="24" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[26].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="25" Grid.Column="0" Text="27" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="25" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[27].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="26" Grid.Column="0" Text="28" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="26" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[28].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="27" Grid.Column="0" Text="29" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="27" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[29].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                    <TextBlock Grid.Row="28" Grid.Column="0" Text="30" Margin="2,2,12,3" HorizontalAlignment="Right" VerticalAlignment="Bottom"/>
                                    <TextBox Grid.Row="28" Grid.Column="1" Margin="5,1,5,1"
							            MouseDoubleClick="SelectText" GotKeyboardFocus="SelectText" PreviewMouseLeftButtonDown="SelectivelyIgnoreMouseButton" Style="{StaticResource TextBoxStyle}">
                                        <Binding Path="BlockCoefficients[30].BlockCoefficient" ValidatesOnDataErrors="True" Converter="{StaticResource decimalConverter}" 
                                         UpdateSourceTrigger="LostFocus" Mode="TwoWay">
                                            <Binding.ValidationRules>
                                                <local:BlockCoefficientNullableRule />
                                            </Binding.ValidationRules>
                                        </Binding>
                                    </TextBox>

                                </Grid>
                            </ScrollViewer>
                        </Border>

                    </Grid>
                </DockPanel>
            </Grid>
        </DockPanel>
        <TextBlock x:Name="StatusText" Text="{Binding StatusBarText, NotifyOnTargetUpdated=True}" VerticalAlignment="Bottom" HorizontalAlignment="Center" FontSize="14" TextAlignment="Center" Height="28" Width="400" Margin="5">
            <TextBlock.Triggers>
                <EventTrigger RoutedEvent="Binding.TargetUpdated">
                    <BeginStoryboard>
                        <Storyboard>
                            <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="Opacity">
                                <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
                                <EasingDoubleKeyFrame KeyTime="0:0:0.6" Value="1"/>
                                <EasingDoubleKeyFrame KeyTime="0:0:2" Value="1"/>
                                <EasingDoubleKeyFrame KeyTime="0:0:8" Value="0"/>
                            </DoubleAnimationUsingKeyFrames>
                        </Storyboard>
                    </BeginStoryboard>
                </EventTrigger>
            </TextBlock.Triggers>
        </TextBlock>
    </Grid>
</UserControl>